<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="ad.size" content="width=100%,height=250">
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<title>citim</title>
	<link rel="stylesheet" href="main.css">
</head>
<body>

<div id="html_banner">
	<a class="html_banner_link" href="%link1%" target="_blank">
		<div class="html_banner_left"></div>
		<div class="html_banner_right"></div>
		<div class="html_banner_center"></div>
		<div id="car" class="html_banner_car">
			<div id="wheel_1" class="html_banner_wheel html_banner_wheel__1"></div>
			<div id="wheel_2" class="html_banner_wheel html_banner_wheel__2"></div>
		</div>
	</a>
</div>

<script type="text/javascript">

var car = document.getElementById('car');
var wheel_1 = document.getElementById('wheel_1');
var wheel_2 = document.getElementById('wheel_2');

var transformElement = function(element, transformCmd) {
	element.style.MozTransform = transformCmd;
	element.style.WebkitTransform = transformCmd;
	element.style.OTransform = transformCmd;
	element.style.MsTransform = transformCmd;
	element.style.transform = transformCmd;
};

var normalize = function (delta, percent) {
    return percent * delta * 2 - delta;
};

var move = function(data) {
	var percentX = data.x / data.w;
	var shiftX = normalize(data.w / 2 - 300, percentX);
	transformElement(car, 'translateX(' + shiftX + 'px)');
	transformElement(wheel_1, 'rotate(' + shiftX*7 + 'deg)');
	transformElement(wheel_2, 'rotate(' + shiftX*7 + 'deg)');
};

window.addEventListener("message", function(e) {
	move(JSON.parse(e.data));
});

// setTimeout(() => move({x: 0, w: 1450}), 1000);

</script>

</body>
</html>
